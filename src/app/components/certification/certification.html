<div class="container mt-4">
  <!-- Form -->
  <form [formGroup]="form" (ngSubmit)="submitForm()" enctype="multipart/form-data" class="card shadow-sm p-3 border-0">
    <h5 class="mb-3 text-primary fw-bold">{{ isEditing ? 'Edit Certification' : 'Add Certification' }}</h5>

    <div class="row g-3">
      <div class="col-md-6">
        <input formControlName="title" placeholder="Title" class="form-control">
      </div>
      <div class="col-md-6">
        <input formControlName="organization" placeholder="Organization" class="form-control">
      </div>
      <div class="col-md-6">
        <input type="date" formControlName="issueDate" class="form-control">
      </div>
      <div class="col-md-6">
        <input type="date" formControlName="expirationDate" class="form-control">
      </div>
      <div class="col-md-6">
        <input formControlName="credentialId" placeholder="Credential ID" class="form-control">
      </div>
      <div class="col-md-6">
        <input formControlName="credentialUrl" placeholder="Credential URL" class="form-control">
      </div>
      <div class="col-12">
        <input type="file" (change)="onFileSelected($event)" class="form-control">
      </div>
    </div>

    <div class="mt-3 d-flex gap-2">
      <button type="submit" class="btn btn-success">{{ isEditing ? 'Update' : 'Add' }}</button>
      <button type="button" class="btn btn-secondary" (click)="resetForm()">Cancel</button>
    </div>
  </form>

  <!-- List -->
  <div class="mt-4 row g-3">
    <div *ngFor="let cert of certifications" class="col-md-6">
      <div class="card h-100 shadow-sm border-0">

        <!-- صورة الشهادة -->
        <img *ngIf=" cert.image" [src]="'http://localhost:3000'+cert.image" alt="{{ cert.title }}" class="card-img-top"
          style="max-height: 200px; object-fit: cover;">


        <div class="card-body">
          <h6 class="card-title text-primary">{{ cert.title }}</h6>
          <p class="mb-1 text-muted">{{ cert.organization }}</p>
          <small class="d-block">Issued: {{ cert.issueDate }}</small>
          <small *ngIf="cert.expirationDate">Expires: {{ cert.expirationDate }}</small>
        </div>

        <div class="card-footer bg-white border-0 d-flex justify-content-end gap-2">
          <button class="btn btn-sm btn-outline-primary" (click)="editCertification(cert)">Edit</button>
          <button class="btn btn-sm btn-outline-danger" (click)="askDelete(cert.id!)">Delete</button>
        </div>
      </div>
    </div>


    <!-- Empty State -->
    <div *ngIf="!certifications.length" class="text-center text-muted mt-4">
      <p>No certifications added yet.</p>
    </div>
  </div>

</div>
<div *ngIf="showDeleteConfirm" class="delete-overlay">
  <div class="delete-box">
    <p>Are you sure you want to delete?</p>
    <button (click)="confirmDelete()" class="btn btn-danger me-2">Yes</button>
    <button (click)="cancelDelete()" class="btn btn-secondary">No</button>
  </div>
</div>
